-# coding: utf-8
!!! XML
!!!
%html
  %head
    %title
      Web De Dobon!!
    %meta{'http-equiv' => 'content', :content => 'text/html; charset=utf-8'}
    %link{:type => 'text/css',
          :href => "#{app_root}/js/lib/css/ui-lightness/jquery-ui-1.8.16.custom.css",
          :rel => 'stylesheet'}
    %link{:type => 'text/css',
          :href => "#{app_root}/styles/index.css",
          :rel => 'stylesheet'}
    %script{:type => 'text/javascript',
            :src  => "#{app_root}/js/lib/jquery.js"}
    %script{:type => 'text/javascript',
            :src  => "#{app_root}/js/lib/jquery-ui.js"}
    %script{:type => 'text/javascript',
            :src  => "#{app_root}/js/ws-dobon.js"}
    :javascript
      if("#{@player.nil?}" == "true") {
        var player_data = null;
      }
      else {
        var player_data = {
          name: "#{@player.name unless @player.nil?}",
          room: "#{@player.room_id unless @player.nil?}"
        };
      }
  %body
    %div#ws-dobon-main
      %div#dialog-message.ui-dialog-content.ui-widget-content{:title => 'メッセージ'}
        test
      %div#title.container
        %h1

      %div#create_room_container.container
        %h2.menu-title
          %a#menu_create_room
        %div.menu-contents
          %p
            作成するゲームの名前を入力して下さい。
          %input#room_name{:type => 'text', :value => ''}
          %button#create_room
            create
        %h2.menu-title
          %a#menu_join_room
        %div.menu-contents
          %p
            参加するゲームを選択し、プレイヤー名を入力してください。
          %input#player_name{:type => 'text', :value => ''}
          %button#join_room
            join

      %div#room_list_container.container
        %h2.menu-title
          %a#menu_game_list
        %div
          %ul#room_list
            - @rooms.each do |room|
              %li.ui-widget-content
                %span.room_name{:value => "#{room.id}"}= "#{room.name}"

      %div#game_table_container.container
        %h2
          Game Table
        %div
          %button#game_play
            play
          %button#game_dobon
            dobon
          %button#game_ready{:value => 'ready'}
            ready
          %div.display_playinfo
          %div.display_playinfo
            %span hand:
            %ol#hand
          %div.display_playinfo
            %span players: 
            %span#players
          %div.display_playinfo
            %span played: 
            %span#played

